<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>لوحة تحكم الأدمن</title>
  <link rel="stylesheet" href="../styles/main.css" />
  <style>
    body { font-family: Arial, sans-serif; background-color: #f2f2f2; margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
    .container { background-color: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 0 10px rgba(0,0,0,0.1); width: 90%; max-width: 500px; }
    h2 { text-align: center; margin-bottom: 20px; }
    input, select, button { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; font-size: 16px; }
    button { background-color: #1a73e8; color: white; border: none; cursor: pointer; }
    button:hover { background-color: #1666c1; }
    .error { color: red; text-align: center; display: none; margin-top: 10px; }
    #adminForm { display: none; }
    .output { background-color: #f1f1f1; padding: 10px; border-radius: 8px; font-family: monospace; white-space: pre-wrap; margin-top: 15px; overflow-x: auto; max-height: 300px; }
  </style>
</head>
<body>

<div class="container">
  <div id="loginForm">
    <h2>تسجيل دخول الأدمن</h2>
    <input type="email" id="email" placeholder="البريد الإلكتروني" required />
    <input type="password" id="password" placeholder="كلمة المرور" required />
    <button onclick="login()">دخول</button>
    <p class="error" id="loginError">بيانات الدخول غير صحيحة</p>
  </div>

  <div id="adminForm">
    <h2>نشر منتج جديد</h2>

    <!-- إضافة رفع صورة -->
    <input type="file" id="uploadImage" accept="image/*" />
    <input type="text" id="productImage" placeholder="رابط الصورة أو قم برفع صورة" required />

    <input type="text" id="productName" placeholder="اسم المنتج" required />
    <input type="number" id="productPrice" placeholder="السعر" required min="1" />
    <select id="productCategory" required>
      <option value="" disabled selected>اختر القسم</option>
      <option value="devices">الأجهزة</option>
      <option value="tools">الأدوات</option>
      <option value="electronics">الإلكترونيات</option>
      <option value="appliances">الأجهزة المنزلية</option>
    </select>
    <button onclick="generateCode()">إنشاء الكود</button>

    <div class="output" id="codeOutput"></div>
  </div>
</div>

<script>
  function login() {
    const email = document.getElementById("email").value.trim();
    const pass = document.getElementById("password").value.trim();
    const loginForm = document.getElementById("loginForm");
    const adminForm = document.getElementById("adminForm");
    const error = document.getElementById("loginError");

    if (email === "alihaidernet.ah@gmail.com" && pass === "55663215566321") {
      loginForm.style.display = "none";
      adminForm.style.display = "block";
      error.style.display = "none";
    } else {
      error.style.display = "block";
    }
  }

  document.getElementById('uploadImage').addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('productImage').value = e.target.result;
    };
    reader.readAsDataURL(file);
  });

  function generateCode() {
    const name = document.getElementById("productName").value.trim();
    const price = parseFloat(document.getElementById("productPrice").value.trim());
    const img = document.getElementById("productImage").value.trim();
    const category = document.getElementById("productCategory").value;

    if (!name || !price || !img || !category) {
      alert("يرجى تعبئة جميع الحقول واختيار القسم");
      return;
    }

    const code = `
<!-- منتج جديد -->
<div class="product-card">
  <img src="${img}" alt="${name}">
  <h2>${name}</h2>
  <p>السعر: ${price.toLocaleString()} د.ع</p>
  <label>الكمية: <input type="number" min="1" value="1" class="quantity" /></label>
  <button onclick="addToCart('${name}', ${price}, this)">أضف إلى السلة</button>
</div>
<!-- نهاية المنتج -->`.trim();

    document.getElementById("codeOutput").textContent = code;
    alert("انسخ الكود وضعه داخل ملف القسم المناسب مثل " + category + ".html");
  }
</script>

</body>
</html>
